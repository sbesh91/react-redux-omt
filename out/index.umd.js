!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@preact/signals-react"),require("use-deep-compare-effect")):"function"==typeof define&&define.amd?define(["exports","@preact/signals-react","use-deep-compare-effect"],t):t((e||self).reactReduxOmt={},e.signalsReact,e.useDeepCompareEffect)}(this,function(e,t,n){function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var u,i,r=/*#__PURE__*/a(n),s=new t.Signal(null),c=new Map;e.createWorkerSelector=function(e,t){return{name:e,fn:t}},e.dispatch=function(e){var t;null==(t=u)||t.postMessage({type:"dispatch",action:e})},e.initializeWorkerStore=function(e,t){function n(t,n){var a,u,r,s=null==(a=i)||null==(u=a[t.selector])?void 0:u.fn,c=null!=(r=t.params)?r:[];if(s){var o=s.apply(void 0,[e.getState()].concat(c));postMessage({uuid:n,value:o})}}i=t,addEventListener("message",function(t){var a=t.data;switch(a.type){case"dispatch":e.dispatch(a.action);break;case"subscribe":c.set(a.uuid,a.selector),n(a.selector,a.uuid);break;case"unsubscribe":c.delete(a.uuid)}}),e.subscribe(function(){c.forEach(n)})},e.initializeWorkerStoreListener=function(e){u=e,e.addEventListener("message",function(e){s.value=e.data})},e.useWorkerSelector=function(e,n,a){var i=t.useSignal(""),c=t.useSignal(a);return t.useSignalEffect(function(){var e=s.value;e&&e.uuid===i.peek()&&(c.value=e.value)}),r.default(function(){var t,a=crypto.randomUUID();return i.value=a,null==(t=u)||t.postMessage({type:"subscribe",uuid:a,selector:{selector:e.name,params:n}}),function(){var e;null==(e=u)||e.postMessage({type:"unsubscribe",uuid:a})}},[e,n]),c}});
//# sourceMappingURL=index.umd.js.map
